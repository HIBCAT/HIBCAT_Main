{% extends 'ibhi/02_layout_fluid.html' %}

{% block title %}
    Report
{% endblock %}

{% block visual_one %}

    <!-- Container for the visualization -->
    <div id="vis3"></div>

{% endblock %}

{% block visual_two %}

    <!-- Container for the visualization -->
    <div id="vis1"></div>

{% endblock %}

{% block visual_three %}

        <!-- Container for the visualization -->
    <div id="vis2"></div>

{% endblock %}

{% block visual_four %}

    <!-- Container for the visualization -->


{% endblock %}

{% block script %}


    var vlSpec1 = {
        "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
        "data": {"url": "http://127.0.0.1:7001/visual_1.csv"},
        "transform": [{"window": [{"op": "row_number", "as": "row_number"}]}],
        "vconcat": [
            {
                "layer": [
                    {
                        "title": {"text": "Step 1: Please click and drag inside the first graph's area", "fontSize": 15, "anchor": "start"},
                        "width": 1500,
                        "height": 100,
                        "mark": {"type": "line", "strokeWidth": 1.5, "tooltip": true, "color": "#000080"},
                        "transform": [
                            {"filter": {"field": "attributes", "oneOf": ["bw_std_vol_0_20"]}}
                        ],
                        "encoding": {
                            "x": {"field": "date", "type": "temporal", "title": "Date"},
                            "y": {
                                "field": "values",
                                "type": "quantitative",
                                "axis": {
                                    "tickCount": 3,
                                    "grid": false,
                                    "title": "Standardized Volume"
                                }
                            }
                        }
                    },
                    {
                        "width": 1500,
                        "height": 100,
                        "mark": {"type": "line", "strokeWidth": 1.5, "tooltip": true, "color": "#e84a27"},
                        "transform": [
                            {"filter": {"field": "attributes", "oneOf": ["cc_std_vol_0_20"]}}
                        ],
                        "selection": {"brush": {"type": "interval", "encodings": ["x"]}},
                        "encoding": {
                            "x": {"field": "date", "type": "temporal", "title": "       Standardized Volume of Daily Posts(0 to 20) (Orange: News Media | Blue: Social Media)"},
                            "y": {
                                "field": "values",
                                "type": "quantitative",
                                "axis": {"tickCount": 3, "grid": false}
                            }
                        }
                    }
                ]
            },
            {
                "layer": [
                    {
                        "width": 1500,
                        "height": 100,
                        "mark": {"type": "line", "strokeWidth": 1.5, "tooltip": true, "color": "#e84a27"},
                        "transform": [
                            {"filter": {"field": "attributes", "oneOf": ["cc_volume"]}}
                        ],
                        "encoding": {
                            "x": {
                                "field": "date",
                                "type": "temporal",
                                "scale": {"domain": {"selection": "brush"}},
                                "axis": {"title": "Date,      True Volume: ClineCenter | News Media Posts"}
                            },
                            "y": {
                                "field": "values",
                                "type": "quantitative",
                                "axis": {"tickCount": 3, "grid": false, "title": "Post Volume"}
                            }
                        }
                    }
                ]
            },
            {
                "layer": [
                    {
                        "layer": [
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#e84a27"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_net_senti_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Net Sentiment"
                                    }
                                }
                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {"filter": {"field": "attributes", "oneOf": ["cc_vwas"]}}
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Net Sentiment"
                                    }
                                }
                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "bar",
                                    "opacity": 0.2,
                                    "color": "#000080",
                                    "tooltip": true
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_std_vol_0_20"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {
                                            "title": "Date,        ClineCenter: News Media ( Orange: Net Sentiment | Grey: Volumetric Weighted Avg Sentiment Score )"
                                        }
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Standardized Volume(Blue Bar)"
                                    }
                                }
                            }
                        ]
                    }
                ]
            },
            {
                "layer": [
                    {
                        "width": 1500,
                        "height": 100,
                        "mark": {"type": "line", "strokeWidth": 1.5, "tooltip": true, "color": "#000080"},
                        "transform": [
                            {"filter": {"field": "attributes", "oneOf": ["bw_volume"]}}
                        ],
                        "encoding": {
                            "x": {
                                "field": "date",
                                "type": "temporal",
                                "axis": {"title": "Date,      True Volume: Social Media Posts"},
                                "scale": {"domain": {"selection": "brush"}}
                            },
                            "y": {
                                "field": "values",
                                "type": "quantitative",
                                "axis": {"tickCount": 3, "grid": false, "title": "Post Volume"}
                            }
                        }
                    }
                ]
            },
            {
                "layer": [
                    {
                        "layer": [
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#000080"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_net_senti_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Net Sentiment"
                                    }
                                }
                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {"filter": {"field": "attributes", "oneOf": ["bw_vwas"]}}
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Net Sentiment"
                                    }
                                }
                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "bar",
                                    "opacity": 0.2,
                                    "color": "#000080",
                                    "tooltip": true
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_std_vol_0_20"]
                                        },
                                        "calculate": "{'bw_std_vol_0_20': 'Social Media Standard Volume (Scale 0 to 20)'}[datum.attributes]",
                                        "as": "attributes"
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {
                                            "title": "Date,      BrandWatch ( Blue: Net Sentiment | Grey: Volumetric Weighted Avg Sentiment Score )"
                                        }
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Standardized Volume(Blue Bar)"
                                    }
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    };


        var vlSpec2 = {
        "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
        "data": {"url": "http://127.0.0.1:7001/visual_2.csv"},

        "transform": [{
            "window": [{"op": "row_number", "as": "row_number"}]
        }],
        "vconcat": [
            <!--Graph 1-->
            {
                "layer": [
                    <!--Event Details-->
                    <!--Main 1-->
                    {
                        "title": {"text": "Step 1: Please click and drag inside the first graph's area", "fontSize": 15, "anchor": "start"},
                        "width": 1500,
                        "height": 100,
                        "mark": {
                            "type": "line",
                            "strokeWidth": 1.5,
                            "tooltip": true,
                            "color": "#000080"

                        },
                        "transform": [
                            {
                                "filter": {
                                    "field": "attributes",
                                    "oneOf": ["bw_3ma_volume_std_0_100"]
                                }
                            }
                        ],
                        "encoding": {
                            "x": {
                                "field": "date",
                                "type": "temporal",
                                "title": "Standardized Volume of Daily Posts: Orange: News Media | Blue: Social Media | Date"
                            },
                            "y": {
                                "field": "values", "type": "quantitative",
                                "axis": {
                                    "tickCount": 3, "grid": false,
                                    "title": "Standardized Volume"
                                }
                            }
                        }
                    },
                    {
                        "width": 1500,
                        "height": 100,
                        "mark": {
                            "type": "line",
                            "strokeWidth": 1.5,

                            "tooltip": true,
                            "color": "#e84a27",
                        },
                        "transform": [
                            {
                                "filter": {
                                    "field": "attributes",
                                    "oneOf": ["cc_3ma_volume_std_0_100"]
                                }
                            }
                        ],
                        "selection": {
                            "brush": {"type": "interval", "encodings": ["x"]}
                        },
                        "encoding": {
                            "x": {
                                "field": "date",
                                "type": "temporal",
                            },
                            "y": {
                                "field": "values", "type": "quantitative",
                                "axis": {"tickCount": 3, "grid": false}
                            },
                        }
                    }
                ]
            },

            <!--Graph 3-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line",
                                    "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#008000"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_positive"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "News Media Signals | Green: Positive | Red: Negative | Grey: Neutral | Blue: Volume"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Post Volume"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line",
                                    "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_neutral"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": ""}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line",
                                    "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#DC143C"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_negative"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": ""}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line",
                                    "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#0000FF"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_volume"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": ""}
                                }

                            },


                        ]
                    }
                ]
            },

            <!--Graph 8-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_3ma_positive"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "News Media Posts Volume | Green: Positive | Grey: 3-Month Moving Average"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume, 3-Month Moving Average"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#008000"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_positive"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume, 3-Month Moving Average"}
                                }

                            }



                        ]
                    }
                ]
            },

            <!--Graph 9-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_3ma_neutral"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "News Media Posts Volume | Blue: Neutral | Grey: 3-Month Moving Average"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume, 3-Month Moving Average"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#0000FF"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_neutral"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume, 3-Month Moving Average"}
                                }

                            }



                        ]
                    }
                ]
            },

            <!--Graph 10-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_3ma_negative"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "News Media Posts Volume | Red: Negative | Grey: 3-Month Moving Average"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume, 3-Month Moving Average"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#DC143C"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_negative"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume, 3-Month Moving Average"}
                                }

                            }



                        ]
                    }
                ]
            },

            <!--Graph 11-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_3ma_volume"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "News Media Posts Volume | Blue: Total Volume | Grey: 3-Month Moving Average"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume, 3-Month Moving Average"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#0000FF"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_volume"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume, 3-Month Moving Average"}
                                }

                            }



                        ]
                    }
                ]
            },

            <!--Graph 12-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_3ma_positive_std_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "Scale: 0 to 100 | Grey: Social Media | Green: News Media"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Standardized Volume, Social Media & News Media"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#008000"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_3ma_positive_std_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Standardized Volume, Social Media & News Media"}
                                }

                            }



                        ]
                    }
                ]
            },

            <!--Graph 13-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_3ma_neutral_std_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "Scale: 0 to 100 | Grey: Social Media | Blue: News Media"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Standardized Volume, Social Media & News Media"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#0000FF"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_3ma_neutral_std_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Standardized Volume, Social Media & News Media"}
                                }

                            }



                        ]
                    }
                ]
            },

            <!--Graph 14-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_3ma_negative_std_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "Scale: 0 to 100 | Grey: Social Media | Red: News Media"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Standardized Volume, Social Media & News Media"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#DC143C"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_3ma_negative_std_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Standardized Volume, Social Media & News Media"}
                                }

                            }



                        ]
                    }
                ]
            },

            <!--Graph 15-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_3ma_volume_std_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "Scale: 0 to 100 | Grey: Social Media | Blue: News Media"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Standardized Volume, Social Media & News Media"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#0000FF"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["cc_3ma_volume_std_0_100"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Standardized Volume, Social Media & News Media"}
                                }

                            }


                        ]
                    }
                ]
            },

            <!--Graph 2-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line",
                                    "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#008000"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_positive"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "Social Media Signals | Green: Positive | Red: Negative | Grey: Neutral | Blue: Volume"}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Post Volume"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line",
                                    "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_neutral"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": ""}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line",
                                    "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#DC143C"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_negative"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": ""}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line",
                                    "strokeWidth": 1.5,
                                    "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#0000FF"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_volume"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": ""}
                                }

                            },


                        ]
                    }
                ]
            },


            <!--Graph 4-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_3ma_positive"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "Social Media Posts Volume | Green: Positive | Grey: 3-Month Moving Average"}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Volume, 3-Month Moving Average"
                                    }
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#008000"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_positive"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Volume, 3-Month Moving Average"
                                    }
                                }

                            }


                        ]
                    }
                ]
            },

            <!--Graph 5-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_3ma_neutral"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume"}
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#0000FF"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_neutral"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "Social Media Posts Volume | Blue: Neutral | Grey: 3-Month Moving Average"}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Volume, 3-Month Moving Average"
                                    }
                                }

                            }


                        ]
                    }
                ]
            },

            <!--Graph 6-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_3ma_negative"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "Social Media Posts Volume | Red: Negative | Grey: 3-Month Moving Average"}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Volume, 3-Month Moving Average"
                                    }
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#DC143C"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_negative"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {"field": "values", "type": "quantitative", "title": "Volume"}
                                }

                            }


                        ]
                    }
                ]
            },

            <!--Graph 7-->
            {
                "layer": [
                    <!--Event Details-->

                    <!--Main 4-->
                    {
                        "layer": [

                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#95A5A6"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_3ma_volume"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": "Social Media Posts Volume | Blue: Total Volume | Grey: 3-Month Moving Average"}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Volume, 3-Month Moving Average"
                                    }
                                }

                            },
                            {
                                "width": 1500,
                                "height": 400,
                                "mark": {
                                    "type": "line", "strokeWidth": 1.5, "interpolate": "monotone",
                                    "tooltip": true,
                                    "color": "#0000FF"
                                },
                                "transform": [
                                    {
                                        "filter": {
                                            "field": "attributes",
                                            "oneOf": ["bw_volume"]
                                        }
                                    }
                                ],
                                "encoding": {
                                    "x": {
                                        "field": "date",
                                        "type": "temporal",
                                        "scale": {"domain": {"selection": "brush"}},
                                        "axis": {"title": ""}
                                    },
                                    "y": {
                                        "field": "values",
                                        "type": "quantitative",
                                        "title": "Volume, 3-Month Moving Average"
                                    }
                                }

                            }


                        ]
                    }
                ]
            },


        ],

        "resolve": {"legend": {"color": "independent"}}
    };



        var vlSpec3 = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "description": "Drag a rectangular brush to show (first 100) selected points in a table.",
        "data": {"url": "http://127.0.0.1:7001/visual_3.csv"},
        "transform": [{
            "window": [{"op": "row_number", "as": "row_number"}]
        }],

        "vconcat": [

            {
                "title": {"text": "Step 1: Please click and drag inside the first graph's area", "fontSize": 15, "anchor": "start"},
                "width": 1301,
                "height": 100,
                "mark": {"type": "line", "tooltip": true, "color": "#e84a27"},
                "selection": {"brush_volume": {"type": "interval", "encodings": ["x"]}},
                "encoding": {
                    "x": {
                        "field": "publication_date_only",
                        "type": "temporal",
                        "title": "       Volume of Daily Posts (Orange: News Media)"
                    },
                    "y": {
                        "field": "cc_volume",
                        "type": "quantitative",
                        "axis": {"tickCount": 3, "grid": false}
                    }
                }
            },

            {
                "title": {"text": "Step 2: Please click and drag inside the second graph's area", "fontSize": 15, "anchor": "start"},

                "width": 1301,
                "height": 500,
                "params": [{
                    "name": "brush",
                    "select": "interval"
                }],
                "mark": {"type": "circle", "tooltip": true, "clip": true},
                "encoding": {
                    "x": {
                        "field": "publication_date_only", "type": "temporal", "title": "Date",
                        "scale": {"domain": {"selection": "brush_volume"}},
                    },
                    "y": {"field": "bing_liu_pos", "type": "quantitative", "aggregate": "count"},
                    "size": {"value": 150},
                    "color": {
                        "condition": {
                            "param": "brush",
                            "field": "bing_liu_net_sentiment",
                            "type": "ordinal",
                            "title": "Net Sentiment"
                        },
                        "value": "lightgray"
                    }
                }
            },


            {

                "transform": [
                    {"filter": {"param": "brush"}},
                    {"window": [{"op": "rank", "as": "rank"}]},
                    {"filter": {"field": "rank", "lt": 100}}
                ],


                "hconcat": [


                    {
                        "width": 100,
                        "title": "Date",
                        "mark": "text",
                        "encoding": {
                            "text": {"field": "publication_date_only", "type": "temporal"},
                            "y": {"field": "row_number", "type": "ordinal", "axis": null}
                        }
                    },

                    {
                        "width": 1000,
                        "title": "News Headline",
                        "mark": "text",
                        "encoding": {
                            "text": {"field": "title", "type": "nominal"},
                            "y": {"field": "row_number", "type": "ordinal", "axis": null}
                        }
                    },


                    {
                        "width": 70,
                        "title": "% Positive",
                        "mark": "text",
                        "encoding": {
                            "text": {"field": "bing_liu_pos", "type": "nominal"},
                            "y": {"field": "row_number", "type": "ordinal", "axis": null}
                        }
                    },
                    {
                        "width": 70,
                        "title": "% Negative",
                        "mark": "text",
                        "encoding": {
                            "text": {"field": "bing_liu_neg", "type": "nominal"},
                            "y": {"field": "row_number", "type": "ordinal", "axis": null}
                        }
                    }
                ]
            }

        ],
        "resolve": {"legend": {"color": "independent"}}
    };





    // Embed the visualization in the container with id `vis`
    vegaEmbed('#vis1', vlSpec1, {'actions': true});


    // Embed the visualization in the container with id `vis`
    vegaEmbed('#vis2', vlSpec2, {'actions': true});


        // Embed the visualization in the container with id `vis`
    vegaEmbed('#vis3', vlSpec3, {'actions': true});


{% endblock %}



